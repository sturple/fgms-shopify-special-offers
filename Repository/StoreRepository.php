<?php

namespace Fgms\SpecialOffersBundle\Repository;

/**
 * StoreRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class StoreRepository extends \Doctrine\ORM\EntityRepository
{
	/**
	 * Obtains the Store entity with a certain name.
	 *
	 * @param string $name
	 *
	 * @return Store|null
	 */
	public function getByName($name)
	{
		$qb = $this->createQueryBuilder('s');
		$qb->andWhere($qb->expr()->eq('s.name',':name'))
			->setParameter('name',$name);
		$q = $qb->getQuery();
		$arr = $q->getResult();
		if (count($arr) !== 1) return null;
		return $arr[0];
	}

	/**
	 * Retrieves all active Store entities.
	 *
	 * @return array
	 */
	public function getActive()
	{
		$qb = $this->createQueryBuilder('s');
		$qb->andWhere($qb->expr()->eq('s.status',':status'))
			->setParameter('status','active');
		$q = $qb->getQuery();
		return $q->getResult();
	}
}
